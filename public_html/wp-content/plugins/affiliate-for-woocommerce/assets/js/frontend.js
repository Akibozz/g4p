!function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=1)}([function(e,t,a){"use strict";function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}a.d(t,"a",(function(){return b}));var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,i=[{key:"requestHandler",value:function(t){var a=new FormData,n=t.requestData||{};for(var i in n)a.append(i,n[i]);m.request({method:t.method||"POST",url:e.getAFWParams("ajaxurl")||"",params:{action:n.dashboard},body:a,withCredentials:t.withCredentials||!1,responseType:t.responseType||"json"}).then((function(e){t.hasOwnProperty("callback")&&t.callback(e)}))}},{key:"getDate",value:function(e){var t,a=new Date,n="";switch(e){case"today":t=a,n=a;break;case"yesterday":t=new Date(a.getFullYear(),a.getMonth(),a.getDate()-1),n=new Date(a.getFullYear(),a.getMonth(),a.getDate()-1);break;case"this_week":t=new Date(a.getFullYear(),a.getMonth(),a.getDate()-(a.getDay()-1)),n=a;break;case"last_week":t=new Date(a.getFullYear(),a.getMonth(),a.getDate()-(a.getDay()-1)-7),n=new Date(a.getFullYear(),a.getMonth(),a.getDate()-(a.getDay()-1)-1);break;case"last_4_week":t=new Date(a.getFullYear(),a.getMonth(),a.getDate()-29),n=a;break;case"this_month":t=new Date(a.getFullYear(),a.getMonth(),1),n=a;break;case"last_month":t=new Date(a.getFullYear(),a.getMonth()-1,1),n=new Date(a.getFullYear(),a.getMonth(),0);break;case"3_months":t=new Date(a.getFullYear(),a.getMonth()-2,1),n=a;break;case"6_months":t=new Date(a.getFullYear(),a.getMonth()-5,1),n=a;break;case"this_year":t=new Date(a.getFullYear(),0,1),n=a;break;case"last_year":t=new Date(a.getFullYear()-1,0,1),n=new Date(a.getFullYear(),0,0);break;default:t=new Date(a.getFullYear(),a.getMonth(),1),n=a}var i=6e4*(new Date).getTimezoneOffset();return t=new Date(t.getTime()-i),n=new Date(n.getTime()-i),{startDate:t.toISOString().slice(0,10),endDate:n.toISOString().slice(0,10)}}},{key:"getDateTime",value:function(e){return e=e+" "+(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()}},{key:"getFullDate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Date,a=0!==e?new Date(t.setDate(t.getDate()+e)):t;return a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)}},{key:"formatNumber",value:function(e){return accounting.formatNumber(e,{precision:afwcDashboardParams.precision,thousand:afwcDashboardParams.thousandSeperator,decimal:afwcDashboardParams.decimal})}},{key:"getAFWParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object.keys(t).length?t:afwcDashboardParams||{};if(e.includes(".")){var n=this.getAFWParams(e.slice(0,e.indexOf(".")),a);return this.getAFWParams(e.slice(e.indexOf(".")+1),n)}return""!==e?e in a?a[e]:"":a}},{key:"doCopy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e.length>0){var t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),navigator&&navigator.clipboard&&navigator.clipboard.writeText(t.value),document.body.removeChild(t)}}},{key:"getCampaignStatus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=e.getAFWParams("campaignStatuses")||{};return""===t?a:t in a?a[t]:""}},{key:"getCommissionPlansStatus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=e.getAFWParams("commissionPlanStatuses")||{};return""===t?a:t in a?a[t]:""}}],(a=null)&&n(t.prototype,a),i&&n(t,i),e}();function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.showLoader=e.showLoader||!1,e.msg=e.msg||_x("Loading","default loader message","affiliate-for-woocommerce")}var t,a,n;return t=e,n=[{key:"showLoader",get:function(){return e._showLoader},set:function(t){return e._showLoader=Boolean(t)}},{key:"msg",get:function(){return e._msg},set:function(t){return e._msg=t}}],(a=[{key:"view",value:function(t){return m("div",{class:"fixed w-full flex flex-col left-0 top-0 h-full justify-center text-center items-center space-y-4 z-50"},e.msg?m("div",{class:"text-lg text-gray-600"},e.msg):"",m("div",{class:"text-indigo-600"},m("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-16 h-16",stroke:"currentColor",fill:"none",viewBox:"0 0 57 57"},m("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},m("circle",{cx:"5",cy:"50",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})),m("circle",{cx:"27",cy:"5",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})),m("circle",{cx:"49",cy:"50",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"}))))))}}])&&r(t.prototype,a),n&&r(t,n),e}();function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.data={kpi:{},campaigns:[]},this.params=t||{},this.fetch()}var t,a,n;return t=e,n=[{key:"data",get:function(){return e._data},set:function(t){e._data=t}}],(a=[{key:"fetch",value:function(){s.showLoader=!0,s.msg=_x("Loading Campaigns","Loading text for campaigns","affiliate-for-woocommerce"),i.requestHandler({requestData:{cmd:"fetch_dashboard_data",security:i.getAFWParams("security.campaign.fetchData")||"",dashboard:"afwc_campaign_controller",campaign_status:afwcDashboardParams.campaign_status||""},callback:function(t){"Success"==t.ACK&&(e.data.kpi=t.result.kpi||{},e.data.campaigns=t.result.campaigns||[]),s.showLoader=!1}})}}])&&o(t.prototype,a),n&&o(t,n),e}();function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}l.data={kpi:{},campaigns:[]};var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize()}var t,a,n;return t=e,n=[{key:"initialize",value:function(){e.flags={showNotification:0},e.notification={message:"",status:""}}}],(a=null)&&c(t.prototype,a),n&&c(t,n),e}();function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}u.initialize();var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),this.setCurrentCampaign(e.currentCampaignID)}var t,a,n;return t=e,n=[{key:"initialize",value:function(){e.details={title:"",targetLink:afwcDashboardParams.home_url,slug:"",campaignId:0,shortDescription:"",body:"",status:"Draft",metaData:{}}}},{key:"newCampaign",value:function(){e.currentCampaignID=-1,new e}},{key:"saveCampaign",value:function(){i.requestHandler({requestData:{cmd:"save_campaign",campaign:JSON.stringify(e.details),security:i.getAFWParams("security.campaign.save")||"",dashboard:"afwc_campaign_controller"},callback:function(t){"Success"==t.ACK&&(t.last_inserted_id?(e.details.campaignId=t.last_inserted_id,l.data.campaigns.push(e.details),u.notification.message=__("Campaign created successfully","affiliate-for-woocommerce")):(l.data.campaigns=l.data.campaigns.map((function(t){return t.campaignId==e.details.campaignId?e.details:t})),u.notification.message=__("Campaign updated successfully","affiliate-for-woocommerce")),u.flags.showNotification=1,u.notification.status="success",e.currentCampaignID=0)}})}},{key:"deleteCampaign",value:function(){i.requestHandler({requestData:{cmd:"delete_campaign",campaign_id:e.currentCampaignID,security:i.getAFWParams("security.campaign.delete")||"",dashboard:"afwc_campaign_controller"},callback:function(t){if("Success"==t.ACK){var a=e.details.campaignId;l.data.campaigns=l.data.campaigns.filter((function(e){return e.campaignId!=a})),e.currentCampaignID=0,u.flags.showNotification=1,u.notification.message=__("Campaign deleted successfully","affiliate-for-woocommerce"),u.notification.status="success"}}})}},{key:"details",get:function(){return e._details},set:function(t){e._details=t}}],(a=[{key:"setCurrentCampaign",value:function(t){var a={};t>0&&(a=l.data.campaigns.filter((function(e){return e.campaignId==t}))[0]),e.details={title:a.title||"",targetLink:a.targetLink||afwcDashboardParams.home_url,slug:a.slug||"",campaignId:a.campaignId||0,shortDescription:a.shortDescription||"",body:a.body||"",status:a.status||"Draft",metaData:a.metaData||{}}}}])&&f(t.prototype,a),n&&f(t,n),e}();function g(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}d.initialize();var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,n;return t=e,(a=[{key:"view",value:function(e){return""!=d.details.slug&&(d.details.targetLink+=(d.details.targetLink.match(/[\?]/g)?"&":"?")+"utm_campaign="+d.details.slug),d.details.targetLink+=(d.details.targetLink.match(/[\?]/g)?"&":"?")+afwcDashboardParams.pname+"="+afwcDashboardParams.affiliate_id,m("aside",{class:"fixed inset-0 overflow-hidden",style:"z-index:120000"},m("div",{class:"absolute inset-0 overflow-hidden"},m("div",{class:"absolute inset-0 bg-gray-500 transition-opacity opacity-75",onclick:function(){d.currentCampaignID=0}}),m("section",{class:"absolute inset-y-0 right-0 pl-20 max-w-full flex"},m("div",{class:"w-screen max-w-4xl"},m("div",{class:"h-full flex flex-col space-y-6 py-4 bg-white shadow-xl overflow-y-scroll"},m("header",{class:"px-4 sm:px-6"},m("div",{class:"flex items-start justify-between space-x-3"},m("h2",{class:"text-3xl leading-8 text-gray-900"},d.details.title||""),m("div",{class:"h-7 flex items-center space-x-3"},m("button",{"aria-label":"Close panel",class:"leading-none text-gray-400 hover:text-gray-500 transition ease-in-out duration-150 p-0",onclick:function(){d.currentCampaignID=0}},m("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})))))),m("div",{class:"relative flex-1 px-4 sm:px-6"},m("div",{class:"absolute inset-0 px-4 sm:px-6"},m("p",{class:"text-lg"},d.details.shortDescription||""),m("p",{class:"mt-4"},__("Link","affiliate-for-woocommerce")," : ",m("code",null,d.details.targetLink||"")),m("div",{class:"mt-12 mb-4"},m.trust(d.details.body||"")))))))))}}])&&g(t.prototype,a),n&&g(t,n),e}();function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0,startDate:t.attrs.startDate||"",endDate:t.attrs.endDate||""}}var t,a,n;return t=e,(a=[{key:"refreshModel",value:function(e){this.params.id=e,this.model=new d}},{key:"view",value:function(){var e=this;return m("div",null,m("div",null,m("ul",{class:"text-gray-600 m-0 w-full"},l.data.campaigns.map((function(t,a){return m("li",{style:"cursor:pointer",class:"my-2 overflow-hidden text-gray-400 bg-white shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50",onclick:function(){d.currentCampaignID=t.campaignId,e.refreshModel(d.currentCampaignID)}},m("div",{class:"flex items-center pl-4 py-2"},m("div",{class:"text-gray-700 text-lg pr-4 flex-1 sm:truncate leading-6"},t.title),m("div",{class:"mx-2"},m("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},m("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})))))})))),0!==d.currentCampaignID?m(p,{id:d.currentCampaignID}):"")}}])&&h(t.prototype,a),n&&h(t,n),e}();function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t,a){return t&&y(e.prototype,t),a&&y(e,a),e}d.currentCampaignID=0;var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize(t.attrs)}return w(e,[{key:"initialize",value:function(e){this.urlParams=Object.keys(e).length?e:{start_date:new Date((new Date).setDate((new Date).getDate()-30)).toISOString().slice(0,10),end_date:(new Date).toISOString().slice(0,10)},this.model=new l(this.urlParams)}}]),w(e,[{key:"onupdate",value:function(e){this.urlParams!=e.attrs&&Object.keys(e.attrs).length&&this.initialize(e.attrs)}},{key:"view",value:function(){return m("div",null,l.data.campaigns.length>0?m("[",null,m(v,null)):m("p",{class:"text-xl"},afwcDashboardParams.no_campaign_string))}}]),e}()},function(e,t,a){"use strict";a.r(t),function(e){a(3);var t=a(0);e.__=wp.i18n.__,e._x=wp.i18n._x,e.sprintf=wp.i18n.sprintf;var n=document.getElementsByClassName("afw-campaigns")[0]||"";n&&m.route(n,"/campaigns",{"/campaigns":{view:function(e){return[m(t.a,e.attrs)]}}})}.call(this,a(2))},function(e,t){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(e){"object"==typeof window&&(a=window)}e.exports=a},function(e,t,a){}]);